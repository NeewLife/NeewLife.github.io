
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="안되면 될 때 까지">
    <title>[Spring Boot] 테스트 코드 사용법 - 안되면 될 때 까지</title>
    <meta name="author" content="오세영">
    
    
        <link rel="icon" href="https://NeewLife.github.io/assets/images/favicon.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"오세영","sameAs":[]},"articleBody":"\n\n테스트 코드란?\n개발한 기능을 실행해서 테스트 할 때 자바의 main 메서드를 실행하거나, 웹 어플리케이션의 컨트롤러를 통해서 기능을 실행한다.\n그런데 이렇게 실행하면서 테스트를 하면\n\n준비하고 실행하는데 오래 걸리고 \n반복적으로 실행하기도 어려우며 \n여러 테스트를 한번에 실행하기가 어렵다.\n\n그래서 자바에서는 JUnit 이라는 프레임워크로 테스트를 실행하여 이런 문제를 해결한다.\n\n\n사용법\nMaven의 pom.xml 이나 Gradle 설정 파일에 JUnit5 라이브러리를 설치한다.(구글링하면 3초면 나옴)\n보통 테스트 클래스를 만들때는 src 폴더에서 main 말고 test에서 \n\n같은 이름의 경로설정\n테스트하고자하는 클래스명 + Test를 붙인다.예) ‘CarRepository’ 를 테스트하고 싶으면 ‘CarRepositoryTest’ 로 생성\n\n그리고 @Test 어노테이션을 붙인 public void 아무거나()&#123;&#125;; 를 만들어서 실행해본다.\n\n메서드가 비어있어도 초록불 뜨면 성공! (import는 junit.jupiter 를 import 해야함)\n예제로 Car 클래스는 다음과 같이 만들고\n1234567@Data    // lombok 라이브러리public class Car &#123;    private String name;    private int mileage;&#125;\n\nCarInterface 인터페이스를 하나 만들어보자.\n12345public interface CarInterface &#123;    Car myCar(Car car);    Optional&lt;Car&gt; findByName(String name);    List&lt;Car&gt; findAll();&#125;\n\n그리고 이 CarInterface 를 구현할 CarRepository를 하나 더 만들었다고 하자.\n1234567891011121314151617181920212223public class CarRepository implements CarInterface&#123;    private static Map&lt;Long,Car&gt; myStorage = new HashMap&lt;&gt;();    private static Long id = 0L;    @Override    public Car myCar(Car car) &#123;        myStorage.put(++id, car);        return car;    &#125;    @Override    public Optional&lt;Car&gt; findByName(String name) &#123;        return myStorage.values().stream()                .filter(member -&gt; member.getName().equals(name))                .findAny();    &#125;    @Override    public List&lt;Car&gt; findAll() &#123;        return new ArrayList&lt;&gt;(myStorage.values());    &#125;&#125;\n\n테스트 코드 실행하고 싶을 때도 자바 의 main 실행메서드 작성하듯이 하면 된다.\n그럼 이때 findByName함수가 제대로 작동하는지 테스트를 하기 위해서는 다음과 같이 코드를 작성할 수 있다.\n12345678910111213141516171819202122import static org.assertj.core.api.Assertions.*;import org.junit.jupiter.api.Test;public class CarRepositoryTest &#123;    CarRepository repository = new CarRepository();    @Test    public void findByName()&#123;        Car car1 = new Car();        car1.setName(&quot;현대 제네시스&quot;);        repository.myCar(car1);        Car car2 = new Car();        car2.setName(&quot;기아 모닝&quot;);        repository.myCar(car2);        Car result = repository.findByName(&quot;현대 제네시스&quot;).get();        assertThat(result).isEqualTo(car1);    &#125;&#125;\n\nassertThat은 AssertJ 라이브러리에서 지원해주는 비교함수인듯. 여기서는 두 값이 같은지 비교한다.만약 같다면 통과하고, 다르면 AssertException인가? 에러 나옴.\n테스트 실패했을 경우\n테스트 성공했을 경우\n테스트 코드를 여러개 만들 경우\n그런데 테스트 코드를 여러개 만들어서 실행해보면, 테스트 코드의 실행 순서는 보장이 안된다.이러면 어떤 문제가 생기느냐?\n예를 들어서 테스트 코드에 다음 코드를 추가했다고 가정해보자.\n12345678910111213141516@Testpublic void findAll()&#123;    Car car1 = new Car();    car1.setMileage(100000);    repository.myCar(car1);    Car car2 = new Car();    car2.setMileage(100000);    repository.myCar(car2);    List&lt;Car&gt; result = repository.findAll();    assertThat(result.size()).isEqualTo(2);&#125;// 주행거리 테스트 코드\n\n이렇게 코드를 작성했을 때, findByName() 코드, findAll() 코드 각각 테스트를 하면 실행이 완료가 되지만…CarRepositoryTest 클래스 전체를 실행시키면 에러가 발생하며 종료된다.\n\n왜냐하면 같은 클래스 안에 이미 car1, car2가 생성 되어있어서 앞에서 생성된 객체로 테스트하기때문이다..\n다시 말해서 findAll() 의 car1은 name이 없는 객체인데, findByName() 에서 새로 car1을 생성하는게 아니라 findAll() 에서 썼던 car1을 사용한다는 얘기다.(만약 나중에 다시 봤을때 이게 이해가 잘 안된다면 자바의 객체참조나 메모리 부분을 다시 공부해보자…)\n\n\n어쨌든 핵심은 테스트 할 때는 서로 의존관계가 없도록 설계해야 한다.  의존관계를 없애려면 @AfterEach 어노테이션을 활용하여서 코드가 끝날 때마다 데이터를 지워주면 된다.\n1234// src/main 의 CarRepository 클래스에는 myStorage 안에 객체를 담아놨으므로 초기화 하는 clear() 메서드 정의public void clear()&#123;    myStorage.clear();&#125;\n\n123456// 그리고 src/test 의 CarRepositoryTest 클래스에는 다음과 같이 작성한다.@AfterEachpublic void clear()&#123;    repository.clear();&#125;\n\n다시 테스트를 돌려보면 성공하는 걸 볼 수 있다.\n","dateCreated":"2024-01-12T23:50:40+09:00","dateModified":"2024-01-13T01:41:38+09:00","datePublished":"2024-01-12T23:50:40+09:00","description":"테스트 코드에 대해서","headline":"[Spring Boot] 테스트 코드 사용법","image":["https://neewlife.github.io/assets/thumbnails/Spring_Boot.png","https://neewlife.github.io/assets/wallpapers/wallpaper5.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"},"publisher":{"@type":"Organization","name":"오세영","sameAs":[]},"url":"https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/","thumbnailUrl":"https://neewlife.github.io/assets/thumbnails/Spring_Boot.png"}</script>
    <meta name="description" content="테스트 코드에 대해서">
<meta property="og:type" content="blog">
<meta property="og:title" content="[Spring Boot] 테스트 코드 사용법">
<meta property="og:url" content="https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/index.html">
<meta property="og:site_name" content="안되면 될 때 까지">
<meta property="og:description" content="테스트 코드에 대해서">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://neewlife.github.io/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled.png">
<meta property="og:image" content="https://neewlife.github.io/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%201.png">
<meta property="og:image" content="https://neewlife.github.io/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%202.png">
<meta property="og:image" content="https://neewlife.github.io/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%203.png">
<meta property="og:image" content="https://neewlife.github.io/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%204.png">
<meta property="article:published_time" content="2024-01-12T14:50:40.000Z">
<meta property="article:modified_time" content="2024-01-12T16:41:38.649Z">
<meta property="article:author" content="오세영">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://neewlife.github.io/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled.png">
    
    
        
    
    
    
        <meta property="og:image" content="https://neewlife.github.io/assets/thumbnails/Spring_Boot.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://neewlife.github.io/assets/thumbnails/Spring_Boot.png"/>
    
    
        <meta property="og:image" content="https://neewlife.github.io/assets/wallpapers/wallpaper5.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://neewlife.github.io/assets/wallpapers/wallpaper5.jpg"/>
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
            
<link rel="stylesheet" href="/assets/css/gitment.css">

        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            안되면 될 때 까지
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/NeewLife"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-center
                    "
             style="background-image:url('https://neewlife.github.io/assets/wallpapers/wallpaper5.jpg');"
             data-behavior="5">
            
                <div class="post-header main-content-wrap text-center">
    
        <h1 class="post-title">
            [Spring Boot] 테스트 코드 사용법
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2024-01-12T23:50:40+09:00">
	
		    2024/01/12
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Spring-Boot/">Spring Boot</a>


    
</div>

    
</div>

            
        </div>

            <div id="main" data-behavior="5"
                 class="hasCover
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->

<h3 id="테스트-코드란"><a href="#테스트-코드란" class="headerlink" title="테스트 코드란?"></a>테스트 코드란?</h3><hr>
<p>개발한 기능을 실행해서 테스트 할 때 자바의 main 메서드를 실행하거나, 웹 어플리케이션의 컨트롤러를 통해서 기능을 실행한다.</p>
<p>그런데 이렇게 실행하면서 테스트를 하면</p>
<ol>
<li>준비하고 실행하는데 오래 걸리고 </li>
<li>반복적으로 실행하기도 어려우며 </li>
<li>여러 테스트를 한번에 실행하기가 어렵다.</li>
</ol>
<p>그래서 자바에서는 <strong>JUnit</strong> 이라는 프레임워크로 테스트를 실행하여 이런 문제를 해결한다.</p>
<br>

<h2 id="사용법"><a href="#사용법" class="headerlink" title="사용법"></a>사용법</h2><hr>
<p>Maven의 pom.xml 이나 Gradle 설정 파일에 JUnit5 라이브러리를 설치한다.(구글링하면 3초면 나옴)</p>
<p>보통 테스트 클래스를 만들때는 src 폴더에서 main 말고 test에서 </p>
<ul>
<li>같은 이름의 경로설정</li>
<li>테스트하고자하는 클래스명 + Test를 붙인다.<br>예) ‘CarRepository’ 를 테스트하고 싶으면 ‘CarRepositoryTest’ 로 생성</li>
</ul>
<p>그리고 <code>@Test</code> 어노테이션을 붙인 <code>public void 아무거나()&#123;&#125;;</code> 를 만들어서 실행해본다.</p>
<p><img src="/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled.png" alt="Untitled"></p>
<p>메서드가 비어있어도 초록불 뜨면 성공! (import는 junit.jupiter 를 import 해야함)</p>
<p>예제로 Car 클래스는 다음과 같이 만들고</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span>    <span class="comment">// lombok 라이브러리</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> mileage;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CarInterface 인터페이스를 하나 만들어보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarInterface</span> &#123;</span><br><span class="line">    Car <span class="title function_">myCar</span><span class="params">(Car car)</span>;</span><br><span class="line">    Optional&lt;Car&gt; <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line">    List&lt;Car&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>그리고 이 CarInterface 를 구현할 CarRepository를 하나 더 만들었다고 하자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarRepository</span> <span class="keyword">implements</span> <span class="title class_">CarInterface</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Long,Car&gt; myStorage = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Car <span class="title function_">myCar</span><span class="params">(Car car)</span> &#123;</span><br><span class="line">        myStorage.put(++id, car);</span><br><span class="line">        <span class="keyword">return</span> car;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Car&gt; <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> myStorage.values().stream()</span><br><span class="line">                .filter(member -&gt; member.getName().equals(name))</span><br><span class="line">                .findAny();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Car&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(myStorage.values());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>테스트 코드 실행하고 싶을 때도 자바 의 main 실행메서드 작성하듯이 하면 된다.</p>
<p>그럼 이때 findByName함수가 제대로 작동하는지 테스트를 하기 위해서는 다음과 같이 코드를 작성할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.assertj.core.api.Assertions.*;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarRepositoryTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">CarRepository</span> <span class="variable">repository</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CarRepository</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">        car1.setName(<span class="string">&quot;현대 제네시스&quot;</span>);</span><br><span class="line">        repository.myCar(car1);</span><br><span class="line"></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">        car2.setName(<span class="string">&quot;기아 모닝&quot;</span>);</span><br><span class="line">        repository.myCar(car2);</span><br><span class="line"></span><br><span class="line">        <span class="type">Car</span> <span class="variable">result</span> <span class="operator">=</span> repository.findByName(<span class="string">&quot;현대 제네시스&quot;</span>).get();</span><br><span class="line"></span><br><span class="line">        assertThat(result).isEqualTo(car1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>assertThat은 AssertJ 라이브러리에서 지원해주는 비교함수인듯. 여기서는 두 값이 같은지 비교한다.<br>만약 같다면 통과하고, 다르면 AssertException인가? 에러 나옴.</p>
<p>테스트 실패했을 경우<br><img src="/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%201.png" alt="Untitled"></p>
<p>테스트 성공했을 경우<br><img src="/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%202.png" alt="Untitled"></p>
<h3 id="테스트-코드를-여러개-만들-경우"><a href="#테스트-코드를-여러개-만들-경우" class="headerlink" title="테스트 코드를 여러개 만들 경우"></a>테스트 코드를 여러개 만들 경우</h3><hr>
<p>그런데 테스트 코드를 여러개 만들어서 실행해보면, 테스트 코드의 실행 순서는 보장이 안된다.<br>이러면 어떤 문제가 생기느냐?</p>
<p>예를 들어서 테스트 코드에 다음 코드를 추가했다고 가정해보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    car1.setMileage(<span class="number">100000</span>);</span><br><span class="line">    repository.myCar(car1);</span><br><span class="line"></span><br><span class="line">    <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    car2.setMileage(<span class="number">100000</span>);</span><br><span class="line">    repository.myCar(car2);</span><br><span class="line"></span><br><span class="line">    List&lt;Car&gt; result = repository.findAll();</span><br><span class="line"></span><br><span class="line">    assertThat(result.size()).isEqualTo(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 주행거리 테스트 코드</span></span><br></pre></td></tr></table></figure>

<p>이렇게 코드를 작성했을 때, <code>findByName()</code> 코드, <code>findAll()</code> 코드 각각 테스트를 하면 실행이 완료가 되지만…<br>CarRepositoryTest 클래스 전체를 실행시키면 에러가 발생하며 종료된다.</p>
<p><img src="/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%203.png" alt="Untitled"></p>
<p>왜냐하면 같은 클래스 안에 이미 car1, car2가 생성 되어있어서 앞에서 생성된 객체로 테스트하기때문이다..</p>
<p>다시 말해서 <code>findAll()</code> 의 car1은 name이 없는 객체인데, <code>findByName()</code> 에서 새로 car1을 생성하는게 아니라 <code>findAll()</code> 에서 썼던 car1을 사용한다는 얘기다.<br>(만약 나중에 다시 봤을때 이게 이해가 잘 안된다면 자바의 객체참조나 메모리 부분을 다시 공부해보자…)</p>
<br>

<h3 id="어쨌든-핵심은"><a href="#어쨌든-핵심은" class="headerlink" title="어쨌든 핵심은  "></a>어쨌든 핵심은 <b><span class="highlight-text danger">테스트 할 때는 서로 의존관계가 없도록 설계해야 한다. </span> </b></h3><p>의존관계를 없애려면 <code>@AfterEach</code> 어노테이션을 활용하여서 <strong>코드가 끝날 때마다 데이터를 지워주면 된다.</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main 의 CarRepository 클래스에는 myStorage 안에 객체를 담아놨으므로 초기화 하는 clear() 메서드 정의</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>&#123;</span><br><span class="line">    myStorage.clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 그리고 src/test 의 CarRepositoryTest 클래스에는 다음과 같이 작성한다.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterEach</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>&#123;</span><br><span class="line">    repository.clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>다시 테스트를 돌려보면 성공하는 걸 볼 수 있다.</p>
<p><img src="/images/%5BSpring_Boot%5D_%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%BD%94%EB%93%9C%EC%97%90_%EB%8C%80%ED%95%98%EC%97%AC/Untitled%204.png" alt="Untitled"></p>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/09/15/Hexo%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0/"
                    data-tooltip="Hexo 블로그 생성하기"
                    aria-label="다음: Hexo 블로그 생성하기"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitment"
                        aria-label="댓글을 남겨주세요"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 오세영. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/09/15/Hexo%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0/"
                    data-tooltip="Hexo 블로그 생성하기"
                    aria-label="다음: Hexo 블로그 생성하기"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitment"
                        aria-label="댓글을 남겨주세요"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/"
                        aria-label="Google+에 공유하기"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">오세영</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://neewlife.github.io/2024/01/12/[Spring%20Boot]%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%97%90%20%EB%8C%80%ED%95%98%EC%97%AC/';
              
            this.page.identifier = '2024/01/12/[Spring Boot] 테스트 코드에 대하여/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'blog-fk1l8wbpvl';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
